<div id="api_sections">

    {% comment %}
        This is a janky way to filter out pages that aren't meant to hold content. Jekyll allows plugins to use a
        PageWithoutAFile class to represent these, and sometimes other pages that do have a file also don't hold any
        content. The fix for this is that we should be using collection(s) and iterating the values in them to only
        get the pages we expect.
    {% endcomment %}
    {% assign sorted_pages = site.pages | where_exp: "page", "page.path != 'redirects.json'" | where_exp: "page", "page.layout != 'redirect'" | sort:"order" %}

    {% for node in sorted_pages %}
        {% if node.title and node.hidden != true %}
            <div class="sidebar_menu">
                <h4 class="sidebar_menu_header"><a href="{{ node.url | prepend: site.baseurl }}">{{ node.title }}</a></h4>
                <ul class="sidebar_menu_list">
                    {% if node.headings %}
                        {% for heading in node.headings %}
                            <li><a href="{{ node.url | prepend: site.baseurl }}#{{ heading.title | slugify }}" class="sidebar_menu_list_item">{{ heading.title }}</a></li>
                        {% endfor %}
                    {% endif %}
                </ul>
            </div>
        {% endif %}
    {% endfor %}

    <div class="sidebar_menu">
        <h5>SDK Reference</h5>
        <ul class="sidebar_menu_list">
            {% for doc in site.reference %}
                <li><a href="{{ doc.url | prepend: site.baseurl }}" class="sidebar_menu_list_item">{{ doc.title }}</a></li>
            {% endfor %}
        </ul>
    </div>

</div>
